---
title: Работа с файлом sudoers (доступы к sudo)
id: sudoers-file
---

import Highlight from '@site/src/components/Highlight';

В файле `/etc/sudeors` описывается: кто, как и какие команды может выполнять из под sudo, то-есть с правами администратора. Редактировать этот файл можно напрямую, или через команду `visudo`.

:::warning
Обязательно обратите внимание на строку `#includedir your_dir_path`. Она импортирует политики из файлов в указаной директории. **`#` в начале этой строки не означает комментарий!**
:::

## Примеры синтаксиса:

### Указание прав
- `ALL ALL=(ALL) ALL` – разрешает всем пользователям выполнять все команды на всех хостах и от имени всех груп и юзеров:
  - <Highlight>ALL</Highlight> ALL=(ALL) ALL
    - Юзеры, которым будут выданы привелегии (в нашем случае все)
  - ALL <Highlight>ALL</Highlight>=(ALL) ALL
    - Хосты, на которых будут доступны привелегии. Обычно доступен только один хост (текущая машина), поэтому эта часть редко меняется с ALL на что-то другое
  - ALL ALL=<Highlight>(ALL)</Highlight> ALL
    - Юзеры и группы от лица которых пользователь сможет выполнять команды (в нашем случае все)
  - ALL ALL=(ALL) <Highlight>ALL</Highlight>
    - Команды, которые пользователь сможет выполнять (в нашем случае все)
- `ALL ALL=(ALL) NOPASSWD: ALL` – разрешает всем пользователям выполнять все команды на всех хостах и от имени всех груп и юзеров **и не требует пароля**:
  - ALL ALL=(ALL) <Highlight>NOPASSWD:</Highlight> ALL
    - Тег указывает, что пользователь сможет запускать команды без пароля
- `davy ALL=(root:root) NOPASSWD: /bin/ls, /bin/kill` – разрешает пользователю davy выполнять команды `ls` и `kill` без пароля от лица пользователя root и группы root.
- `davy ALL= NOPASSWD: SETENV: /bin/ls, /bin/kill, /usr/bin/vi` – разрешает пользователю davy выполнять команды `ls` и `kill` без пароля и с выставлением запрещённых переменных окружения от кого угодно. 
- `%davy ALL=ALL` – разрешает группе davy выполнять все команды от кого угодно.

### Указание прав через алиасы


Примеры создания алиасов для групп юзеров и команд:
```
User_Alias     GROUPA = user1, user2, user3
User_Alias     GROUPB = %operator, admin

Cmd_Alias      RSTRT = /sbin/restart, /sbin/reboot
```

Примеры использования алиасов:
- `GROUPB ALL= RSTRT` – выдаём группе GROUPB доступ к командам RSTRT
- `GROUPA ALL = /usr/bin/apt update` – выдаём группе GROUPA доступ к команду `apt apdate`